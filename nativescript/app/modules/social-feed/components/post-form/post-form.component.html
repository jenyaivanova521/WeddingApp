<StackLayout class="post-form" [class.post-form--edit]="editForm">

    <StackLayout class="alert alert--danger" *ngIf="error">
        <label [text]="error | json" textWrap="true">
        </label>
        <label [text]="error.title" textWrap="true">
        </label>
    </StackLayout>

    <TextView class="input input--light input--textarea input--transparent"
              (textChange)="setValue('text', $event, 'value')"
              [hint]="textPlaceholder"
              [text]="text">
    </TextView>
    <StackLayout *ngIf="images.length" style="margin-top: 10">
        <FlexboxLayout flexWrap="wrap" alignItems="center" justifyContent="flex-start">
            <StackLayout *ngFor="let photo of images; let i = index">
                <Image class="m-b-10 m-r-10"
                        stretch="aspectFill"
                        width="100"
                        height="100"
                        *ngIf="i < shownPhotosLength"
                        [src]="photo">
                </Image>
            </StackLayout>
        </FlexboxLayout>
    </StackLayout>

    <FlexboxLayout class="post-form__actions">

        <StackLayout class="post-form__icons">

            <!-- TODO uploader -->
            <Label class="icon post-form__camera" text="&#xe90d;" (tap)="camera_image()"></Label>

            <Label class="icon" text="&#xe91a;"></Label>

        </StackLayout>

        <FlexboxLayout alignItems="center" justifyContent="space-between">
            <Button class="btm btn--small btn--sides-padding btn--semibold text-uppercase btn--danger"
                    *ngIf="editForm"
                    (click)="cancel()"
                    text="Cancel">
            </Button>

            <!-- TODO loader if submitted -->
            <Button class="btm btn--small btn--sides-padding btn--action btn--semibold text-uppercase"
                    [class.btn--disabled]="submitted || !postFormData?.text"
                    (tap)="onSubmit()"
                    [text]="editForm ? 'Update post' : 'Post'">
            </Button>
        </FlexboxLayout>

    </FlexboxLayout>

</StackLayout>

<!-- TODO Uploader -->
<!--<uploader (getImages)="images = $event"-->
          <!--[weddingId]="post?.wedding.id"-->
          <!--[uploadedImages]="post?.photos"-->
          <!--(uploadedImageRemoved)="removeImage($event)"-->
          <!--class="mt-3 mb-2"-->
          <!--[initImages]="uploaderImages"-->
          <!--#uploader>-->
<!--</uploader>-->


